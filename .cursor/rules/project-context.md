# プロジェクトコンテキスト

## プロジェクト概要

Poker Trainerは、9-Max No Limit Hold'emポーカーゲームを実装したフルスタックWebアプリケーションです。

## 技術スタック

- **Frontend**: Next.js (React + TypeScript) + Tailwind CSS
- **Backend**: FastAPI (Python) + WebSocket
- **AI**: CFR (Counterfactual Regret Minimization) アルゴリズム
- **Database**: PostgreSQL (オプション)

## 主要機能

1. **リアルタイムマルチプレイヤーゲーム**: WebSocketを使用した同期
2. **AI対戦相手**: CFRアルゴリズムを使用したインテリジェントなAI
3. **9-Maxテーブル**: 最大9人のプレイヤーが参加可能
4. **自動ゲーム進行**: ゲーム終了後2秒で自動的に次のゲームを開始

## 重要な実装ポイント

### ベッティングラウンドの完了判定
- プリフロップ: BBがアクションを取った後、アクションがBBに戻ってきた時点で完了
- フロップ以降: アクションが開始位置に戻ってきた時点で完了

### 最小レイズ額の計算
- `min_raise_amount = max(現在のベット額 + 直前のレイズ幅, 現在のベット額 × 2)`
- レイズ幅は`last_raise_size`で追跡

### ゲーム状態の管理
- `PokerGame`クラスがゲーム状態を管理
- WebSocketでリアルタイムに同期

## 既知の問題

詳細は`docs/ISSUES.md`を参照してください。

- ✅ 最小レイズ額の計算: 修正済み
- ✅ プリフロップのベッティングラウンド完了条件: 修正済み
- ⚠️ 勝敗判定: 未実装（最初のアクティブプレイヤーが勝つ）
- ⚠️ キッカーの判定: 未実装
- ⚠️ スプリットポット: 未実装
- ⚠️ サイドポット: 未実装

